<h3>Add a New Batch</h3>
<div class="row">
    <form action="/batch" method="POST" class="col s12">

        <div class="row">
            <div class="input-field">
                <select id="status" name="product" onchange="toggleFields()">
                    <option value="" disabled selected>Select a product:</option>
                    {{#each products}}
                    <option value="{{productName}}" data-isliquid="{{isLiquid}}">{{productName}}</option>
                    {{/each}}
                </select>
                <label for="product">Product Name</label>
            </div>
        </div>

        <div class="row" id="quantityNonLiquid">
            <div class="input-field">
                <input type="number" id="quantity" name="quantity">
                <label for="quantity">Quantity</label>
            </div>
        </div>

         <div class="row" id="liquidFields" style="display: none;">
            <div class="input-field">
                <input type="number" id="quartsMade" name="quartsMade">
                <label for="quartsMade">Quarts Made</label>
            </div>
            <div class="input-field">
                <input type="number" id="pintsMade" name="pintsMade">
                <label for="pintsMade">Pints Made</label>
            </div>
        </div>

        <div class="row">
            <div class="input-field">
                <input type="date" id="datePacked" name="datePacked">
                <label for="datePacked">Date Packed</label>
            </div>
        </div>

        <div class="row">
            <input type="submit" value="Save" class="btn">
            <a href="/dashboard" class="btn orange">Cancel</a>
        </div>
    </form>
</div>

<script>
    function toggleFields() {
        const select = document.getElementById('status');
        const liquidFields = document.getElementById('liquidFields');
        const isLiquid = select.options[select.selectedIndex].getAttribute('data-isliquid') === 'true';
        const quantityNonLiquid = document.getElementById('quantityNonLiquid');

        if (isLiquid) {
            liquidFields.style.display = 'block';
            quantityNonLiquid.style.display = 'none'
        } else {
            liquidFields.style.display = 'none';
        }
    }

</script>
